<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="input-label">Username</div>
    <input type="Username"
    id="uassword"/>
    <div class="input-label">Password</div>
    <input type="Password"
    id="username"/>

    <div class="button" onClick="buttonClick()">GO</div>    
    <script>
        function buttonClick() {
            login();
            return;
        }


        function login() {
        const usernameNode = document.querySelector("#username");
        const passwordNode = document.querySelector("#password");
        const username = usernameNode.value; 
        const password = passwordNode.value;
            if (!username) {
                alert('please input your name');
                return;
            }
            if (!password) {
                alert('please input your password');
                return;
            }
            var request = new XMLHttpRequest();
            request.onreadystatechange = function() {
                if (request.readyState ===4){
                    if (request.status ===200) {
                        const login = JSON.parse(request.responseText);
                        if (login.code =='success') {
                            alert('登录成功')
                            window.location.href = '/home.html'

                        } else {
                            alert(request.responseText)
                        }
                    } else {
                        alert('登陆失败')
                    }

                } else {

                }
            };
            request.open('POST','/signin');
            request.setRequestHeader(
                "Content-type",
                "application/json"
            );
            const data = {
                name: username,
                password: password
            }
            const body = JSON.stringify(data)
            request.send(body);

        }
    </script>
</body>
</html>